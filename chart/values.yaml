image:
  api:
    repository: ghcr.io/omari58/kontakt-api
    tag: "0.1.0"
  web:
    repository: ghcr.io/omari58/kontakt-web
    tag: "0.1.0"
  pullPolicy: IfNotPresent

api:
  replicas: 2
  port: 3000
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

web:
  replicas: 2
  port: 80
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

# External PostgreSQL connection
database:
  url: ""  # Required: postgresql://user:pass@host:5432/db?schema=public

# External OIDC provider (Keycloak)
oidc:
  issuer: ""
  clientId: kontakt
  clientSecret: ""
  callbackUrl: ""
  adminClaim: realm_access.roles
  adminClaimValue: kontakt-admin

app:
  url: ""             # Public URL (e.g., https://kontakt.example.com)
  corsOrigin: ""      # Defaults to app.url if empty
  jwtSecret: ""
  uploadDir: /app/uploads
  maxFileSize: "5242880"

# Storage driver: "local" (PVC-backed) or "s3" (S3/MinIO/R2)
storage:
  driver: local
  s3:
    bucket: ""
    region: ""
    endpoint: ""             # Required: S3 API endpoint
    publicUrl: ""            # Required: public URL prefix for file access
    forcePathStyle: "true"   # Use path-style URLs (required for MinIO/R2)
    accessKeyId: ""
    secretAccessKey: ""

# Istio Gateway API routing
gateway:
  parentRef:
    name: ""          # Required: name of the Istio Gateway resource
    namespace: ""     # Namespace of the Gateway
  hostname: ""        # e.g., kontakt.example.com

persistence:
  uploads:
    enabled: true
    size: 5Gi
    storageClass: ""
    accessMode: ReadWriteMany

serviceAccount:
  create: true
  name: ""
  annotations: {}
