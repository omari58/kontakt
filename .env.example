# =============================================================================
# Kontakt — Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values for your deployment.

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_URL=http://localhost:4000
PORT=4000
KEYCLOAK_PORT=4080
JWT_SECRET=change-me-to-a-random-secret

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://kontakt:kontakt@localhost:5432/kontakt?schema=public

# -----------------------------------------------------------------------------
# File Uploads
# -----------------------------------------------------------------------------
STORAGE_DRIVER=local
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880

# S3 Storage — local MinIO (pnpm infra:up)
# STORAGE_DRIVER=s3
# S3_BUCKET=kontakt
# S3_REGION=us-east-1
# S3_ENDPOINT=http://localhost:9000
# S3_PUBLIC_URL=http://localhost:9000/kontakt
# S3_FORCE_PATH_STYLE=true
# S3_ACCESS_KEY_ID=kontakt
# S3_SECRET_ACCESS_KEY=kontakt123

# -----------------------------------------------------------------------------
# OIDC Authentication
# -----------------------------------------------------------------------------
# Local Keycloak (docker compose --profile infra):
#   Run: pnpm infra:up
#   Then: pnpm keycloak:setup
#   Admin console: http://localhost:4080/admin (admin/admin)
#   Test users: admin@kontakt.local/admin, user@kontakt.local/user
OIDC_ISSUER=http://localhost:4080/realms/kontakt
OIDC_CLIENT_ID=kontakt
OIDC_CLIENT_SECRET=kontakt-local-secret
OIDC_CALLBACK_URL=http://localhost:4000/api/auth/callback
OIDC_ADMIN_CLAIM=realm_access.roles
OIDC_ADMIN_CLAIM_VALUE=kontakt-admin

# -----------------------------------------------------------------------------
# Apple Wallet (Phase 2)
# -----------------------------------------------------------------------------
APPLE_PASS_TYPE_ID=pass.com.example.kontakt
APPLE_TEAM_ID=XXXXXXXXXX
APPLE_PASS_CERT_PATH=./certs/apple-pass.pem
APPLE_PASS_KEY_PATH=./certs/apple-pass-key.pem

# -----------------------------------------------------------------------------
# Google Wallet (Phase 2)
# -----------------------------------------------------------------------------
GOOGLE_WALLET_ISSUER_ID=1234567890
GOOGLE_SERVICE_ACCOUNT_KEY_PATH=./certs/google-service-account.json
